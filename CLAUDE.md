# CLAUDE.md

This file provides guidance to Claude Code when working with code in this repository.

## Project Overview

**Type**: Shopify Theme Development
**Tech Stack**: Shopify Liquid, Tailwind CSS 4.x, JavaScript (inline in Liquid)
**Package Manager**: pnpm

## Development Commands

### Core Commands
- **`npm run dev`** or **`pnpm dev`** - Start development server with Tailwind watch + Shopify theme dev
- **`npm run build:css`** - Build Tailwind CSS with watch mode
- **`npm run format`** - Format all files with Prettier
- **`npm run format:check`** - Check formatting without changes

### CRITICAL Workflow Commands
- **ALWAYS run `npm run format` AFTER editing .liquid files** - Ensures Liquid syntax and Tailwind classes are properly formatted
- **NEVER manually edit `assets/tailwind.css`** - This file is auto-generated by Tailwind CLI

## Architecture & File Structure

### Key Directories
- **`sections/`** - Shopify sections (header.liquid, footer.liquid, cart.liquid, hero.liquid, product.liquid, collection.liquid, search.liquid, etc.)
- **`layout/`** - Theme layout files (theme.liquid)
- **`snippets/`** - Reusable Liquid components (product-placeholder.liquid)
- **`templates/`** - Page templates (search.liquid)
- **`assets/`** - Static assets (CSS, fonts, images)
- **`locales/`** - Translation files (en.default.json)
- **`config/`** - Shopify theme configuration

### Important Files
- **`layout/theme.liquid`** - Main theme layout, includes all sections
- **`assets/tailwind.input.css`** - Tailwind source file (edit this, not tailwind.css)
- **`assets/tailwind.css`** - Compiled Tailwind (auto-generated, gitignored)

## Code Style & Conventions

### Liquid Template Patterns

#### Section Structure
- **ALWAYS include `{% schema %}` block** at the end of sections
- **ALWAYS include `{% javascript %}` block** for section-specific JS
- Use `data-*` attributes for JavaScript selectors (e.g., `data-cart-trigger`, `data-menu-drawer`)

#### Naming Conventions
- **Collections**: Iterate with `{% for collection in collections %}`
- **Routes**: Use Shopify routes like `{{ routes.root_url }}`
- **Settings**: Access with `{{ section.settings.setting_name }}`

### JavaScript Patterns

#### Event-Driven Architecture
- **ALWAYS use CustomEvents** for cross-section communication
- Pattern: `document.dispatchEvent(new CustomEvent('event:name'))`
- Examples from @sections/header.liquid:
  - `document.dispatchEvent(new CustomEvent('cart:open'))`
  - `document.dispatchEvent(new CustomEvent('search:open'))`

#### DOM Ready Pattern
- **ALWAYS wrap JavaScript** in `document.addEventListener('DOMContentLoaded', () => { ... })`
- Use `querySelector('[data-attribute]')` for element selection

#### Accessibility
- **ALWAYS include `aria-label`** on buttons without text content
- Use semantic HTML and proper button types

### Tailwind CSS Conventions

- **Version**: Tailwind CSS 4.x with CLI
- **Config**: Uses `@import "tailwindcss"` in tailwind.input.css
- **Classes**: Single quotes in Liquid templates (e.g., `class='flex items-center'`)
- **Responsive**: Mobile-first with `md:` prefix for desktop
- **Spacing**: Use Tailwind utility classes, avoid custom CSS

### Prettier Configuration

- **Tab Width**: 2 spaces
- **Quotes**: Single quotes for JS/Liquid
- **Semi**: Required
- **Print Width**: 80 characters
- **Plugins**:
  - `@shopify/prettier-plugin-liquid` - Formats .liquid files
  - `prettier-plugin-tailwindcss` - Auto-sorts Tailwind classes

## Shopify Liquid Specifics

### Liquid Filters & Objects
- **Text transformation**: `{{ text | upcase }}`, `{{ text | downcase }}`
- **Asset URLs**: `{{ 'filename.css' | asset_url | stylesheet_tag }}`
- **Font faces**: `{{ settings.body_font | font_face }}`
- **Cart**: Access cart with `{% if cart.item_count > 0 %}`

### Section Schema
- Use JSON schema for section settings
- Common setting types: `text`, `url`, `image_picker`, `color`, `range`

```liquid
{% schema %}
{
  "name": "Section Name",
  "settings": [
    {
      "type": "text",
      "id": "setting_id",
      "label": "Setting Label",
      "default": "Default Value"
    }
  ]
}
{% endschema %}
```

## Development Workflow

### BEFORE Starting Development
1. **Run `npm run dev`** - Starts Tailwind watch + Shopify theme dev server
2. **NEVER edit `assets/tailwind.css` directly** - Only edit `assets/tailwind.input.css`

### AFTER Editing Files
1. **Run `npm run format`** - Format all modified files
2. **Verify Tailwind compilation** - Check that tailwind.css updates (if you edited tailwind.input.css)

### Git Workflow
- **Modified files** tracked: .liquid files, locales, tailwind.input.css
- **Gitignored files**: node_modules, tailwind.css, .shopify folder, package.json, package-lock.yaml

## Common Patterns

### Interactive Components
- Use `data-*` attributes for triggers: `data-cart-trigger`, `data-search-trigger`, `data-menu-trigger`
- Use CustomEvents for communication between sections
- Close drawers/modals on ESC key and overlay click

### Responsive Design
- **Mobile-first**: Default styles for mobile, `md:` prefix for desktop
- **Header height**: Account for fixed header with `pt-14 md:pt-10` on main content

### Custom Fonts
- **Font Family**: "Helvetica Neue" (defined in tailwind.input.css)
- **Font Weights**: 100 (Thin), 500 (Medium), 700 (Bold)
- **Letter Spacing**: Default 0.05em

## CRITICAL Rules

- **NEVER commit `assets/tailwind.css`** - It's auto-generated and gitignored
- **ALWAYS use single quotes** in Liquid templates for consistency
- **ALWAYS format with Prettier** before committing (.liquid files require special Liquid plugin)
- **ALWAYS use `data-*` attributes** for JavaScript selectors, not classes or IDs
- **NEVER hardcode text** - Use section settings or locale files for all user-facing text
- **ALWAYS test mobile menu/drawer functionality** after editing header.liquid

## Localization

- Main translation file: `locales/en.default.json`
- Access translations in Liquid: `{{ 'key.path' | t }}`
- **ALWAYS add new user-facing strings** to locale files first

## Performance Considerations

- Inline critical JavaScript in `{% javascript %}` blocks
- Use Tailwind utilities instead of custom CSS
- Optimize images before adding to assets folder
- Minimize external dependencies
