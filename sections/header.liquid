<header class='fixed top-0 z-50 flex w-full items-center justify-between border-b border-black bg-white px-4 py-2'>
  <nav class='w-1/3'>
    <ul class='flex gap-2'>
      {% for collection in collections %}
        <li class='rounded-md border border-transparent px-2 pt-1.5 pb-1 text-xs transition-all duration-300 hover:border-black'>
          <a href='{{ collection.url }}'>
            {{ collection.title | upcase }}
          </a>
        </li>
      {% endfor %}
    </ul>
  </nav>
  <a
    href='{{ routes.root_url }}'
    class='absolute left-1/2 -translate-x-1/2 transform text-xl font-bold tracking-[0.1em]'
  >
    {{ section.settings.brand_name | upcase }}
  </a>
  <div class='flex w-1/3 items-center justify-end gap-1'>
    <!-- Search Button -->
    <button
      type='button'
      class='rounded-md p-1 transition-colors hover:bg-gray-100'
      data-search-trigger
      aria-label='Open search'
    >
      <svg
        class='aspect-square w-4 md:w-5'
        fill='none'
        stroke='currentColor'
        viewBox='0 0 24 24'
      >
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z'></path>
      </svg>
    </button>

    <!-- Cart Button -->
    <button
      type='button'
      class='relative rounded-md p-1 transition-colors hover:bg-gray-100'
      data-cart-trigger
      aria-label='Open cart'
    >
      <svg
        class='aspect-square w-4 md:w-5'
        fill='none'
        stroke='currentColor'
        viewBox='0 0 24 24'
      >
        <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z'></path>
      </svg>
      {% if cart.item_count > 0 %}
        <div
          class='absolute top-0 right-0 aspect-square w-2 rounded-full bg-red-500'
        ></div>
      {% endif %}
    </button>
  </div>
</header>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "text",
      "id": "brand_name",
      "label": "Brand Name",
      "default": "BALENCIAGA"
    }
  ]
}
{% endschema %}

{% javascript %}
  document.addEventListener('DOMContentLoaded', () => {
    const cartTrigger = document.querySelector('[data-cart-trigger]');
    const searchTrigger = document.querySelector('[data-search-trigger]');

    if (cartTrigger) {
      cartTrigger.addEventListener('click', () => {
        document.dispatchEvent(new CustomEvent('cart:open'));
      });
    }

    if (searchTrigger) {
      searchTrigger.addEventListener('click', () => {
        document.dispatchEvent(new CustomEvent('search:open'));
      });
    }
  });
{% endjavascript %}
